raw `
SixIsland_AlteringCave_MapScripts::
	map_script MAP_SCRIPT_ON_TRANSITION, SixIsland_AlteringCave_OnTransition
	.byte 0

SixIsland_AlteringCave_OnTransition::
	setworldmapflag FLAG_WORLD_MAP_SIX_ISLAND_ALTERING_CAVE
	call SixIsland_OutcastIsland_UpdateAlteringCaveMewtwo
	end

SixIsland_AlteringCave_EventScript_Spike::
	lock
	faceplayer
	goto_if_set FLAG_SPIKE_DEFEATED, SixIsland_AlteringCave_EventScript_RematchSpike
	msgbox SixIsland_AlteringCave_Text_Spike, MSGBOX_YESNO
	goto_if_eq VAR_RESULT, NO, SixIsland_AlteringCave_EventScript_NoSpike
	trainerbattle_single TRAINER_SPIKE, SixIsland_AlteringCave_Text_YesSpike, SixIsland_AlteringCave_Text_SpikeDefeat, SixIsland_AlteringCave_EventScript_PostSpike, NO_MUSIC
	release
	end

SixIsland_AlteringCave_EventScript_PostSpike::
	msgbox SixIsland_AlteringCave_Text_SpikePostBattle
	setflag FLAG_SPIKE_DEFEATED
	cleartrainerflag TRAINER_SPIKE
	release
	end

SixIsland_AlteringCave_EventScript_CantRematchSpike::
	msgbox SixIsland_AlteringCave_Text_SpikePostBattle
	release
	end

SixIsland_AlteringCave_EventScript_NoSpike::
	msgbox SixIsland_AlteringCave_Text_NoSpike
	release
	end

SixIsland_AlteringCave_EventScript_RematchSpike::
	msgbox SixIsland_AlteringCave_Text_RematchSpike, MSGBOX_YESNO
	goto_if_eq VAR_RESULT, NO, SixIsland_AlteringCave_EventScript_NoSpike
	trainerbattle_single TRAINER_SPIKE, SixIsland_AlteringCave_Text_YesRematchSpike, SixIsland_AlteringCave_Text_RematchSpikeDefeat, SixIsland_AlteringCave_EventScript_PostRematchSpike, NO_MUSIC
	release
	end

SixIsland_AlteringCave_EventScript_PostRematchSpike::
	msgbox SixIsland_AlteringCave_Text_RematchSpikeDefeat
	cleartrainerflag TRAINER_SPIKE
	release
	end
`
