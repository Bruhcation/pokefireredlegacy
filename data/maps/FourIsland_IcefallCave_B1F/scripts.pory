raw `
FourIsland_IcefallCave_B1F_MapScripts::
	.byte 0

FourIsland_IcefallCave_B1F_EventScript_KSI::
	lock
	faceplayer
	goto_if_set FLAG_KSI_DEFEATED, FourIsland_IcefallCave_B1F_EventScript_RematchKSI
	msgbox FourIsland_IcefallCave_B1F_Text_KSI, MSGBOX_YESNO
	goto_if_eq VAR_RESULT, NO, FourIsland_IcefallCave_B1F_EventScript_NoKSI
	trainerbattle_single TRAINER_KSI, FourIsland_IcefallCave_B1F_Text_YesKSI, FourIsland_IcefallCave_B1F_Text_KSIDefeat, FourIsland_IcefallCave_B1F_EventScript_PostKSI, NO_MUSIC
	release
	end

FourIsland_IcefallCave_B1F_EventScript_PostKSI::
	msgbox FourIsland_IcefallCave_B1F_Text_KSIPostBattle
	setflag FLAG_KSI_DEFEATED
	cleartrainerflag TRAINER_KSI
	release
	end

FourIsland_IcefallCave_B1F_EventScript_CantRematchKSI::
	msgbox FourIsland_IcefallCave_B1F_Text_KSIPostBattle
	release
	end

FourIsland_IcefallCave_B1F_EventScript_NoKSI::
	msgbox FourIsland_IcefallCave_B1F_Text_NoKSI
	release
	end

FourIsland_IcefallCave_B1F_EventScript_RematchKSI::
	msgbox FourIsland_IcefallCave_B1F_Text_RematchKSI, MSGBOX_YESNO
	goto_if_eq VAR_RESULT, NO, FourIsland_IcefallCave_B1F_EventScript_NoKSI
	trainerbattle_single TRAINER_KSI, FourIsland_IcefallCave_B1F_Text_YesRematchKSI, FourIsland_IcefallCave_B1F_Text_RematchKSIDefeat, FourIsland_IcefallCave_B1F_EventScript_PostRematchKSI, NO_MUSIC
	release
	end

FourIsland_IcefallCave_B1F_EventScript_PostRematchKSI::
	msgbox FourIsland_IcefallCave_B1F_Text_RematchKSIDefeat
	cleartrainerflag TRAINER_KSI
	release
	end
`
